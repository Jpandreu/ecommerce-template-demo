<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Complete your purchase securely - Payment and confirmation process">
    <meta name="keywords" content="checkout, payment, secure purchase, complete order">
    <meta name="author" content="Your Company">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Checkout - Complete Purchase">
    <meta property="og:description" content="Secure payment process to complete your order">
    <meta property="og:image" content="./assets/images/og-image.jpg">
    <meta property="og:type" content="website">
    
    <title>Checkout - Complete Purchase | YourStore</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõçÔ∏è</text></svg>">
    
    <!-- CSS - Optimized for Performance -->
    <link rel="stylesheet" href="./assets/css/styles.css">
    <link rel="stylesheet" href="./assets/css/cart-checkout.css">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- PayPal Buttons Inline Styles -->
    <style>
        /* MOBILE CHECKOUT OVERRIDE - HIGHEST PRIORITY */
        @media screen and (max-width: 768px) {
            /* Force mobile inputs to full width */
            .mobile-essential input[type="text"],
            .mobile-essential input[type="email"],
            .mobile-essential input[type="tel"],
            .mobile-essential select {
                width: calc(100vw - 3rem) !important;
                max-width: calc(100vw - 3rem) !important;
                height: 56px !important;
                font-size: 16px !important;
                padding: 1rem !important;
                border: 2px solid #ddd !important;
                border-radius: 8px !important;
                box-sizing: border-box !important;
                margin: 0 0 1rem 0 !important;
                display: block !important;
            }
            
            .mobile-essential {
                width: calc(100vw - 1rem) !important;
                max-width: calc(100vw - 1rem) !important;
                margin: 0.5rem auto !important;
                padding: 1rem !important;
                box-sizing: border-box !important;
            }
            
            .mobile-essential .form-grid {
                display: block !important;
                width: 100% !important;
            }
            
            .mobile-essential .form-group {
                display: block !important;
                width: 100% !important;
                margin-bottom: 1.5rem !important;
            }
            
            .container, .checkout-container {
                width: 100vw !important;
                max-width: 100vw !important;
                padding: 0 0.5rem !important;
                margin: 0 !important;
            }
        }
        
        /* PayPal Official Payment Buttons - Matching Official Design */
        .paypal-official-buttons {
            background: white !important;
            border-radius: 8px !important;
            padding: 1rem !important;
            margin: 1rem 0 !important;
            border: 1px solid #e5e7eb !important;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
            width: 100% !important;
            max-width: 400px !important;
            display: block !important;
        }

        .paypal-button-official {
            width: 100% !important;
            border: none !important;
            border-radius: 6px !important;
            padding: 14px 24px !important;
            margin-bottom: 6px !important;
            cursor: pointer !important;
            font-family: "Helvetica Neue", Arial, sans-serif !important;
            font-size: 16px !important;
            font-weight: 600 !important;
            text-align: center !important;
            transition: all 0.2s ease !important;
            min-height: 48px !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            letter-spacing: 0.5px !important;
        }

        .paypal-primary {
            background: #0070ba !important;
            color: white !important;
        }

        .paypal-primary:hover {
            background: #005ea6 !important;
            transform: translateY(-1px) !important;
            box-shadow: 0 2px 8px rgba(0, 112, 186, 0.3) !important;
        }

        .paypal-secondary {
            background: #333333 !important;
            color: white !important;
        }

        .paypal-secondary:hover {
            background: #262626 !important;
            transform: translateY(-1px) !important;
            box-shadow: 0 2px 8px rgba(51, 51, 51, 0.3) !important;
        }

        .paypal-logo {
            font-weight: 700 !important;
            font-size: 18px !important;
            letter-spacing: 1px !important;
        }

        .paypal-card-icon {
            font-size: 20px !important;
            margin-right: 8px !important;
        }

        .paypal-branding {
            text-align: center !important;
            margin-top: 12px !important;
            font-size: 12px !important;
            color: #0070ba !important;
            font-family: "Helvetica Neue", Arial, sans-serif !important;
        }

        .paypal-branding strong {
            font-weight: 600 !important;
        }

        .paypal-notice {
            margin-top: 12px !important;
            padding: 12px !important;
            background: #e3f2fd !important;
            border: 1px solid #bbdefb !important;
            border-radius: 6px !important;
            font-size: 14px !important;
        }

        .notice-content {
            display: flex !important;
            align-items: center !important;
            gap: 8px !important;
            color: #1976d2 !important;
        }

        .notice-content i {
            color: #2196f3 !important;
        }

        /* Official PayPal Section */
        .official-paypal-section {
            margin: 2rem 0 !important;
            width: 100% !important;
            display: block !important;
        }

        .paypal-container {
            max-width: 400px !important;
            margin: 0 auto !important;
            padding: 1rem !important;
            background: white !important;
            border-radius: 8px !important;
            border: 1px solid #e5e7eb !important;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
        }

        #paypal-button-container-main {
            min-height: 50px !important;
        }

        .paypal-loading {
            text-align: center !important;
            padding: 20px !important;
            color: #0070ba !important;
            font-size: 16px !important;
            font-family: "Helvetica Neue", Arial, sans-serif !important;
        }

        .paypal-loading i {
            margin-right: 8px !important;
            color: #0070ba !important;
        }

        .paypal-error {
            text-align: center !important;
            padding: 20px !important;
            color: #d32f2f !important;
            font-size: 14px !important;
            background: #ffebee !important;
            border: 1px solid #f8bbd9 !important;
            border-radius: 6px !important;
            margin-top: 10px !important;
        }

        .paypal-error i {
            margin-right: 8px !important;
            color: #d32f2f !important;
        }

        /* Hide unified payment system completely */
        .unified-payment-methods {
            display: none !important;
        }

        /* Mobile PayPal Buttons */
        @media (max-width: 768px) {
            .mobile-paypal .paypal-button-official,
            .official-paypal-section .paypal-button-official {
                min-height: 52px !important;
                font-size: 18px !important;
                padding: 16px 24px !important;
            }
            
            .mobile-paypal .paypal-logo,
            .official-paypal-section .paypal-logo {
                font-size: 20px !important;
            }
            
            .mobile-paypal .paypal-card-icon,
            .official-paypal-section .paypal-card-icon {
                font-size: 22px !important;
            }
            
            .mobile-paypal .paypal-branding,
            .official-paypal-section .paypal-branding {
                font-size: 11px !important;
            }
            
            .official-paypal-section .paypal-official-buttons {
                max-width: 100% !important;
                margin: 0 !important;
            }
        }

        .paypal-button-official:hover {
            background: #005ea6 !important;
        }

        .paypal-text-official {
            font-weight: 600 !important;
            font-size: 16px !important;
            letter-spacing: 0.5px !important;
        }

        .paypal-card-button-official {
            width: 100% !important;
            background: #2c2e2f !important;
            color: white !important;
            border: none !important;
            border-radius: 6px !important;
            padding: 12px 24px !important;
            margin-bottom: 12px !important;
            cursor: pointer !important;
            font-family: "Helvetica Neue", Arial, sans-serif !important;
            text-align: center !important;
            transition: background-color 0.2s ease !important;
            min-height: 44px !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }

        .paypal-card-button-official:hover {
            background: #1a1c1d !important;
        }

        .card-icon-official i {
            font-size: 18px !important;
            color: white !important;
        }

        .paypal-branding-official {
            text-align: center !important;
            margin: 12px 0 !important;
            font-size: 12px !important;
            color: #6c7378 !important;
            font-family: "Helvetica Neue", Arial, sans-serif !important;
        }

        .paypal-branding-official .developed-text {
            font-weight: normal !important;
        }

        .paypal-branding-official .paypal-brand {
            color: #0070ba !important;
            font-weight: 600 !important;
        }

        .paypal-security-message {
            background: #e6f3ff !important;
            border: 1px solid #b8deff !important;
            border-radius: 6px !important;
            padding: 12px !important;
            margin-top: 12px !important;
        }

        .security-content {
            display: flex !important;
            align-items: center !important;
            gap: 8px !important;
            font-size: 14px !important;
            color: #1565c0 !important;
            font-family: "Helvetica Neue", Arial, sans-serif !important;
        }

        .security-content i {
            color: #1565c0 !important;
            font-size: 16px !important;
        }

        /* Show only on mobile devices */
        @media (max-width: 768px) {
            .paypal-official-buttons {
                display: block !important;
                visibility: visible !important;
                opacity: 1 !important;
            }
        }

        @media (min-width: 769px) {
            .paypal-official-buttons {
                display: none !important;
            }
        }
    </style>
</head>

<body>
    <!-- Demo Banner -->
    <div id="demo-banner" class="demo-banner" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-align: center; position: relative; z-index: 998; transition: transform 0.3s ease-in-out; -webkit-transform: translateZ(0); transform: translateZ(0); width: 100%; box-sizing: border-box; padding: 10px 0; display: block;">
        <div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 20px; box-sizing: border-box;">
            <p class="banner-text" style="margin: 0; font-weight: 500; line-height: 1.4; font-size: 14px; color: white;">
                üéØ <strong>ThemeForest Demo</strong> ‚Ä¢ Professional Template ‚Ä¢ 
                <a href="https://github.com/jpandreu/ecommerce-template-demo" style="color: #FFE066; text-decoration: none; font-weight: 600; margin-left: 8px; transition: color 0.2s ease;">üìÅ Download</a>
            </p>
        </div>
    </div>

    <!-- Header -->
    <header class="header" id="header" style="transition: margin-top 0.3s ease-in-out; position: relative; z-index: 997; -webkit-transform: translateZ(0); transform: translateZ(0); width: 100%; box-sizing: border-box;">
        <div class="container">
            <div class="header-content">
                <!-- Logo -->
                <div class="logo">
                    <a href="index.html">
                        <img src="./assets/images/logo.svg" alt="Your Store" class="logo-img">
                        <span class="logo-text">YourStore</span>
                    </a>
                </div>
                
                <!-- Navigation Menu -->
                <nav class="nav" id="nav">
                    <ul class="nav-list">
                        <li><a href="index.html" class="nav-link">Home</a></li>
                        <li><a href="products.html" class="nav-link">Products</a></li>
                        <li><a href="services.html" class="nav-link">Services</a></li>
                        <li><a href="index.html#testimonials" class="nav-link">Testimonials</a></li>
                        <li><a href="index.html#contact" class="nav-link">Contact</a></li>
                    </ul>
                </nav>
                
                <!-- Header Actions -->
                <div class="header-actions">
                    <a href="cart.html" class="btn btn-outline cart-btn">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count">0</span>
                    </a>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Mobile menu">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Menu Overlay -->
    <div class="navbar-collapse" id="navbarCollapse">
        <div class="mobile-nav-content">
            <!-- Mobile Menu Header -->
            <div class="mobile-nav-header">
                <div class="logo">
                    <img src="./assets/images/logo.svg" alt="Your Store" class="mobile-logo">
                    <span class="logo-text">YourStore</span>
                </div>
                <button class="mobile-close-btn" id="mobileCloseBtn" aria-label="Close menu">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <!-- Mobile Navigation Links -->
            <nav class="mobile-nav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link">
                            <i class="fas fa-home"></i>
                            Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="products.html" class="nav-link">
                            <i class="fas fa-shopping-bag"></i>
                            Products
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="services.html" class="nav-link">
                            <i class="fas fa-cogs"></i>
                            Services
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="cart.html" class="nav-link">
                            <i class="fas fa-shopping-cart"></i>
                            Shopping Cart
                            <span class="cart-badge" id="mobileCartCount">0</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="checkout.html" class="nav-link active">
                            <i class="fas fa-credit-card"></i>
                            Checkout
                        </a>
                    </li>
                </ul>
            </nav>
            
            <!-- Mobile Menu Footer -->
            <div class="mobile-menu-footer">
                <div class="mobile-social-links">
                    <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                </div>
                <div class="mobile-contact-info">
                    <p><i class="fas fa-phone"></i> +34 123 456 789</p>
                    <p><i class="fas fa-envelope"></i> info@yourstore.com</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Breadcrumb -->
    <section class="breadcrumb">
        <div class="container">
            <nav class="breadcrumb-nav">
                <a href="index.html">Home</a>
                <i class="fas fa-chevron-right"></i>
                <a href="cart.html">Cart</a>
                <i class="fas fa-chevron-right"></i>
                <span>Checkout</span>
            </nav>
        </div>
    </section>

    <!-- Checkout Progress -->
    <section class="checkout-progress">
        <div class="container">
            <div class="progress-steps">
                <div class="step completed">
                    <div class="step-icon">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="step-info">
                        <span class="step-title">Cart</span>
                        <span class="step-description">Selected products</span>
                    </div>
                </div>
                <div class="step active">
                    <div class="step-icon">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <div class="step-info">
                        <span class="step-title">Payment</span>
                        <span class="step-description">Billing information</span>
                    </div>
                </div>
                <div class="step">
                    <div class="step-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="step-info">
                        <span class="step-title">Confirmation</span>
                        <span class="step-description">Order completed</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Mobile Direct Payment Interface -->
    <section class="mobile-direct-payment-section" id="mobileDirectPayment" style="display: none;">
        <div class="container">
            <div class="mobile-payment-wrapper">
                <!-- Order Summary Mobile -->
                <div class="mobile-order-summary">
                    <h3 class="summary-title">
                        <i class="fas fa-receipt"></i>
                        Order Summary
                    </h3>
                    <div class="summary-content" id="mobileOrderItems">
                        <!-- Cart items will be populated here -->
                    </div>
                    <div class="summary-totals">
                        <div class="total-row subtotal">
                            <span>Subtotal:</span>
                            <span id="mobileSubtotal">$0.00</span>
                        </div>
                        <div class="total-row shipping">
                            <span>Shipping:</span>
                            <span id="mobileShipping">$5.00</span>
                        </div>
                        <div class="total-row tax">
                            <span>Tax:</span>
                            <span id="mobileTax">$0.00</span>
                        </div>
                        <div class="total-row final">
                            <span>Total:</span>
                            <span id="mobileTotal">$0.00</span>
                        </div>
                    </div>
                </div>

                <!-- Payment Options -->
                <div class="mobile-payment-card">
                    <h3 class="payment-title">Select Payment Method</h3>
                    
                    <!-- PayPal Button -->
                    <div class="direct-paypal-button" id="directPaypalButton">
                        <div class="paypal-logo-container">
                            <span class="paypal-text">PayPal</span>
                        </div>
                    </div>
                    
                    <!-- Credit Card Option -->
                    <div class="direct-card-button" id="directCardButton">
                        <div class="card-icon-container">
                            <i class="fas fa-credit-card"></i>
                        </div>
                    </div>
                    
                    <!-- PayPal Branding -->
                    <div class="paypal-branding">
                        <span class="developed-text">Desarrollado por</span>
                        <strong class="paypal-brand">PayPal</strong>
                    </div>
                </div>

                <!-- Terms and Offers -->
                <div class="mobile-terms-section">
                    <div class="terms-group">
                        <label class="terms-checkbox">
                            <input type="checkbox" id="mobileTermsAccept" required>
                            <span class="checkmark"></span>
                            <span class="terms-text">
                                I accept the <a href="#" class="terms-link">Terms & Conditions</a> and <a href="#" class="terms-link">Privacy Policy</a> *
                            </span>
                        </label>
                    </div>
                    
                    <div class="terms-group">
                        <label class="terms-checkbox">
                            <input type="checkbox" id="mobileOffersAccept">
                            <span class="checkmark"></span>
                            <span class="terms-text">
                                I want to receive promotional offers and updates via email
                            </span>
                        </label>
                    </div>
                </div>
                
                <!-- Cancel Message -->
                <div class="payment-cancel-message" style="display: none;">
                    <div class="cancel-icon">
                        <i class="fab fa-paypal"></i>
                    </div>
                    <span>Pago cancelado. Puedes intentar de nuevo.</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Checkout Content -->
    <section class="checkout-content">
        <div class="container">
            <div class="checkout-layout">
                <!-- Checkout Form -->
                <div class="checkout-form-section">
                    <form class="checkout-form" id="checkoutForm">
                        <!-- Contact Information -->
                        <div class="form-section mobile-essential" id="contactInformation">
                            <div class="section-header">
                                <h3 class="section-title">
                                    <i class="fas fa-user"></i>
                                    Contact Information
                                </h3>
                            </div>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="firstName">First Name *</label>
                                    <input type="text" id="firstName" name="firstName" required>
                                </div>
                                <div class="form-group">
                                    <label for="lastName">Last Name *</label>
                                    <input type="text" id="lastName" name="lastName" required>
                                </div>
                                <div class="form-group full-width">
                                    <label for="email">Email *</label>
                                    <input type="email" id="email" name="email" required>
                                </div>
                                <div class="form-group">
                                    <label for="phone">Phone *</label>
                                    <input type="tel" id="phone" name="phone" required>
                                </div>
                            </div>
                        </div>

                        <!-- Shipping Address -->
                        <div class="form-section mobile-essential" id="shippingAddress">
                            <div class="section-header">
                                <h3 class="section-title">
                                    <i class="fas fa-shipping-fast"></i>
                                    Shipping Address
                                </h3>
                            </div>
                            <div class="form-grid">
                                <div class="form-group full-width">
                                    <label for="address">Address *</label>
                                    <input type="text" id="address" name="address" placeholder="Street, number, floor, door" required>
                                </div>
                                <div class="form-group">
                                    <label for="city">City *</label>
                                    <input type="text" id="city" name="city" required>
                                </div>
                                <div class="form-group">
                                    <label for="postalCode">Postal Code *</label>
                                    <input type="text" id="postalCode" name="postalCode" required>
                                </div>
                                <div class="form-group">
                                    <label for="state">State/Province *</label>
                                    <input type="text" id="state" name="state" placeholder="Enter your state/province" required>
                                </div>
                                <div class="form-group">
                                    <label for="country">Country *</label>
                                    <select id="country" name="country" required>
                                        <option value="">Select your country</option>
                                        <!-- Europe -->
                                        <optgroup label="Europe">
                                            <option value="AD">Andorra</option>
                                            <option value="AT">Austria</option>
                                            <option value="BE">Belgium</option>
                                            <option value="BG">Bulgaria</option>
                                            <option value="HR">Croatia</option>
                                            <option value="CY">Cyprus</option>
                                            <option value="CZ">Czech Republic</option>
                                            <option value="DK">Denmark</option>
                                            <option value="EE">Estonia</option>
                                            <option value="FI">Finland</option>
                                            <option value="FR">France</option>
                                            <option value="DE">Germany</option>
                                            <option value="GR">Greece</option>
                                            <option value="HU">Hungary</option>
                                            <option value="IS">Iceland</option>
                                            <option value="IE">Ireland</option>
                                            <option value="IT">Italy</option>
                                            <option value="LV">Latvia</option>
                                            <option value="LI">Liechtenstein</option>
                                            <option value="LT">Lithuania</option>
                                            <option value="LU">Luxembourg</option>
                                            <option value="MT">Malta</option>
                                            <option value="MC">Monaco</option>
                                            <option value="NL">Netherlands</option>
                                            <option value="NO">Norway</option>
                                            <option value="PL">Poland</option>
                                            <option value="PT">Portugal</option>
                                            <option value="RO">Romania</option>
                                            <option value="SM">San Marino</option>
                                            <option value="SK">Slovakia</option>
                                            <option value="SI">Slovenia</option>
                                            <option value="ES">Spain</option>
                                            <option value="SE">Sweden</option>
                                            <option value="CH">Switzerland</option>
                                            <option value="GB">United Kingdom</option>
                                            <option value="VA">Vatican City</option>
                                        </optgroup>
                                        
                                        <!-- North America -->
                                        <optgroup label="North America">
                                            <option value="CA">Canada</option>
                                            <option value="MX">Mexico</option>
                                            <option value="US">United States</option>
                                        </optgroup>
                                        
                                        <!-- South America -->
                                        <optgroup label="South America">
                                            <option value="AR">Argentina</option>
                                            <option value="BO">Bolivia</option>
                                            <option value="BR">Brazil</option>
                                            <option value="CL">Chile</option>
                                            <option value="CO">Colombia</option>
                                            <option value="EC">Ecuador</option>
                                            <option value="GY">Guyana</option>
                                            <option value="PY">Paraguay</option>
                                            <option value="PE">Peru</option>
                                            <option value="SR">Suriname</option>
                                            <option value="UY">Uruguay</option>
                                            <option value="VE">Venezuela</option>
                                        </optgroup>
                                        
                                        <!-- Asia -->
                                        <optgroup label="Asia">
                                            <option value="AF">Afghanistan</option>
                                            <option value="BD">Bangladesh</option>
                                            <option value="BT">Bhutan</option>
                                            <option value="BN">Brunei</option>
                                            <option value="KH">Cambodia</option>
                                            <option value="CN">China</option>
                                            <option value="IN">India</option>
                                            <option value="ID">Indonesia</option>
                                            <option value="JP">Japan</option>
                                            <option value="KZ">Kazakhstan</option>
                                            <option value="KG">Kyrgyzstan</option>
                                            <option value="LA">Laos</option>
                                            <option value="MY">Malaysia</option>
                                            <option value="MV">Maldives</option>
                                            <option value="MN">Mongolia</option>
                                            <option value="MM">Myanmar</option>
                                            <option value="NP">Nepal</option>
                                            <option value="KP">North Korea</option>
                                            <option value="PK">Pakistan</option>
                                            <option value="PH">Philippines</option>
                                            <option value="SG">Singapore</option>
                                            <option value="KR">South Korea</option>
                                            <option value="LK">Sri Lanka</option>
                                            <option value="TW">Taiwan</option>
                                            <option value="TJ">Tajikistan</option>
                                            <option value="TH">Thailand</option>
                                            <option value="TL">Timor-Leste</option>
                                            <option value="TM">Turkmenistan</option>
                                            <option value="UZ">Uzbekistan</option>
                                            <option value="VN">Vietnam</option>
                                        </optgroup>
                                        
                                        <!-- Africa -->
                                        <optgroup label="Africa">
                                            <option value="DZ">Algeria</option>
                                            <option value="AO">Angola</option>
                                            <option value="BJ">Benin</option>
                                            <option value="BW">Botswana</option>
                                            <option value="BF">Burkina Faso</option>
                                            <option value="BI">Burundi</option>
                                            <option value="CV">Cape Verde</option>
                                            <option value="CM">Cameroon</option>
                                            <option value="CF">Central African Republic</option>
                                            <option value="TD">Chad</option>
                                            <option value="KM">Comoros</option>
                                            <option value="CG">Congo</option>
                                            <option value="CD">Democratic Republic of the Congo</option>
                                            <option value="DJ">Djibouti</option>
                                            <option value="EG">Egypt</option>
                                            <option value="GQ">Equatorial Guinea</option>
                                            <option value="ER">Eritrea</option>
                                            <option value="ET">Ethiopia</option>
                                            <option value="GA">Gabon</option>
                                            <option value="GM">Gambia</option>
                                            <option value="GH">Ghana</option>
                                            <option value="GN">Guinea</option>
                                            <option value="GW">Guinea-Bissau</option>
                                            <option value="CI">Ivory Coast</option>
                                            <option value="KE">Kenya</option>
                                            <option value="LS">Lesotho</option>
                                            <option value="LR">Liberia</option>
                                            <option value="LY">Libya</option>
                                            <option value="MG">Madagascar</option>
                                            <option value="MW">Malawi</option>
                                            <option value="ML">Mali</option>
                                            <option value="MR">Mauritania</option>
                                            <option value="MU">Mauritius</option>
                                            <option value="MA">Morocco</option>
                                            <option value="MZ">Mozambique</option>
                                            <option value="NA">Namibia</option>
                                            <option value="NE">Niger</option>
                                            <option value="NG">Nigeria</option>
                                            <option value="RW">Rwanda</option>
                                            <option value="ST">Sao Tome and Principe</option>
                                            <option value="SN">Senegal</option>
                                            <option value="SC">Seychelles</option>
                                            <option value="SL">Sierra Leone</option>
                                            <option value="SO">Somalia</option>
                                            <option value="ZA">South Africa</option>
                                            <option value="SS">South Sudan</option>
                                            <option value="SD">Sudan</option>
                                            <option value="SZ">Eswatini</option>
                                            <option value="TZ">Tanzania</option>
                                            <option value="TG">Togo</option>
                                            <option value="TN">Tunisia</option>
                                            <option value="UG">Uganda</option>
                                            <option value="ZM">Zambia</option>
                                            <option value="ZW">Zimbabwe</option>
                                        </optgroup>
                                        
                                        <!-- Oceania -->
                                        <optgroup label="Oceania">
                                            <option value="AU">Australia</option>
                                            <option value="FJ">Fiji</option>
                                            <option value="KI">Kiribati</option>
                                            <option value="MH">Marshall Islands</option>
                                            <option value="FM">Micronesia</option>
                                            <option value="NR">Nauru</option>
                                            <option value="NZ">New Zealand</option>
                                            <option value="PW">Palau</option>
                                            <option value="PG">Papua New Guinea</option>
                                            <option value="WS">Samoa</option>
                                            <option value="SB">Solomon Islands</option>
                                            <option value="TO">Tonga</option>
                                            <option value="TV">Tuvalu</option>
                                            <option value="VU">Vanuatu</option>
                                        </optgroup>
                                        
                                        <!-- Middle East -->
                                        <optgroup label="Middle East">
                                            <option value="BH">Bahrain</option>
                                            <option value="IR">Iran</option>
                                            <option value="IQ">Iraq</option>
                                            <option value="IL">Israel</option>
                                            <option value="JO">Jordan</option>
                                            <option value="KW">Kuwait</option>
                                            <option value="LB">Lebanon</option>
                                            <option value="OM">Oman</option>
                                            <option value="PS">Palestine</option>
                                            <option value="QA">Qatar</option>
                                            <option value="SA">Saudi Arabia</option>
                                            <option value="SY">Syria</option>
                                            <option value="TR">Turkey</option>
                                            <option value="AE">United Arab Emirates</option>
                                            <option value="YE">Yemen</option>
                                        </optgroup>
                                    </select>
                                </div>
                            </div>

                            <!-- Same as Billing Address -->
                            <div class="form-group checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="sameAsBilling" name="sameAsBilling" checked>
                                    <span class="label-text">
                                        <i class="fas fa-copy"></i>
                                        Billing address is the same as shipping address
                                    </span>
                                </label>
                            </div>
                        </div>

                        <!-- Billing Address (Hidden by default) -->
                        <div class="form-section" id="billingSection" style="display: none;">
                            <div class="section-header">
                                <h3 class="section-title">
                                    <i class="fas fa-file-invoice"></i>
                                    Billing Address
                                </h3>
                            </div>
                            <div class="form-grid">
                                <div class="form-group full-width">
                                    <label for="billingAddress">Address *</label>
                                    <input type="text" id="billingAddress" name="billingAddress" placeholder="Street, number, floor, door">
                                </div>
                                <div class="form-group">
                                    <label for="billingCity">City *</label>
                                    <input type="text" id="billingCity" name="billingCity">
                                </div>
                                <div class="form-group">
                                    <label for="billingPostalCode">Postal Code *</label>
                                    <input type="text" id="billingPostalCode" name="billingPostalCode">
                                </div>
                            </div>
                        </div>

                        <!-- Payment Method - Unified System -->
                        <div class="form-section payment-method-section">
                            <div class="section-header">
                                <h3 class="section-title">
                                    <i class="fas fa-credit-card"></i>
                                    Payment Method
                                </h3>
                            </div>
                            
                            <!-- Unified Payment Methods (HIDDEN - using official PayPal buttons only) -->
                            <div class="unified-payment-methods" id="unifiedPaymentMethods" style="display: none;">
                                
                                <!-- PayPal Option -->
                                <div class="payment-option paypal-option">
                                    <div class="payment-header">
                                        <i class="fab fa-paypal paypal-icon"></i>
                                        <span class="payment-title">Pay with PayPal</span>
                                        <span class="payment-subtitle">Fast, secure, and trusted worldwide</span>
                                    </div>
                                    <div class="paypal-official-buttons">
                                        <!-- PayPal Official Button -->
                                        <button type="button" class="paypal-button-official paypal-primary" onclick="window.handlePayPalPayment()">
                                            <span class="paypal-logo">PayPal</span>
                                        </button>
                                        
                                        <!-- Debit/Credit Card via PayPal -->
                                        <button type="button" class="paypal-button-official paypal-secondary" onclick="window.handlePayPalCardPayment()">
                                            <span class="paypal-card-icon">üí≥</span>
                                        </button>
                                        
                                        <!-- PayPal Branding -->
                                        <div class="paypal-branding">
                                            <span>Desarrollado por <strong>PayPal</strong></span>
                                        </div>
                                        
                                        <!-- Cancellation Notice -->
                                        <div class="paypal-notice" style="display: none;">
                                            <div class="notice-content">
                                                <i class="fas fa-info-circle"></i>
                                                <span>Pago cancelado. Puedes intentar de nuevo.</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Credit Card Option -->
                                <div class="payment-option card-option">
                                    <div class="payment-header">
                                        <i class="fas fa-credit-card card-icon"></i>
                                        <span class="payment-title">Pay with Credit/Debit Card</span>
                                        <div class="card-icons">
                                            <i class="fab fa-cc-visa"></i>
                                            <i class="fab fa-cc-mastercard"></i>
                                            <i class="fab fa-cc-amex"></i>
                                            <i class="fab fa-cc-discover"></i>
                                        </div>
                                    </div>
                                    <button type="button" class="btn btn-secondary btn-full card-payment-btn" id="creditCardBtn">
                                        <i class="fas fa-credit-card"></i>
                                        <span>Continue with Credit Card</span>
                                    </button>
                                </div>
                                
                                <!-- Bank Transfer Option -->
                                <div class="payment-option transfer-option">
                                    <div class="payment-header">
                                        <i class="fas fa-university transfer-icon"></i>
                                        <span class="payment-title">Bank Transfer</span>
                                        <span class="payment-subtitle">Direct bank payment</span>
                                    </div>
                                    <button type="button" class="btn btn-outline btn-full transfer-payment-btn" id="bankTransferBtn">
                                        <i class="fas fa-university"></i>
                                        <span>Continue with Bank Transfer</span>
                                    </button>
                                </div>
                                
                            </div>
                            
                            <!-- PayPal Official Buttons Section -->
                            <div class="official-paypal-section">
                                <div class="paypal-container">
                                    <!-- PayPal SDK Buttons will render here -->
                                    <div id="paypal-button-container-main"></div>
                                    
                                    <!-- Loading message -->
                                    <div id="paypal-loading" class="paypal-loading">
                                        <i class="fas fa-spinner fa-spin"></i>
                                        Loading PayPal...
                                    </div>
                                    
                                    <!-- Error message -->
                                    <div id="paypal-error" class="paypal-error" style="display: none;">
                                        <i class="fas fa-exclamation-triangle"></i>
                                        PayPal is temporarily unavailable. Please try again.
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Payment Instructions -->
                            <div class="payment-instructions">
                                <div class="security-note">
                                    <i class="fas fa-shield-alt"></i>
                                    <span>Your payment information is secure and encrypted</span>
                                </div>
                            </div>

                            <!-- Card Details (Shown when card is selected) -->
                            <div class="card-details" id="cardDetails">
                                <div class="form-grid">
                                    <div class="form-group full-width">
                                        <label for="cardNumber">Card Number *</label>
                                        <input type="text" id="cardNumber" name="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
                                    </div>
                                    <div class="form-group">
                                        <label for="cardName">Name on Card *</label>
                                        <input type="text" id="cardName" name="cardName" placeholder="Full name">
                                    </div>
                                    <div class="form-group">
                                        <label for="cardExpiry">Expiry Date *</label>
                                        <input type="text" id="cardExpiry" name="cardExpiry" placeholder="MM/YY" maxlength="5">
                                    </div>
                                    <div class="form-group">
                                        <label for="cardCvv">CVV *</label>
                                        <input type="text" id="cardCvv" name="cardCvv" placeholder="123" maxlength="4">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- PayPal Official Payment Buttons (Mobile) -->
                        <div class="paypal-official-buttons" id="paypalOfficialButtons">
                            <!-- PayPal Button -->
                            <div class="paypal-button-official" id="paypalButtonOfficial">
                                <span class="paypal-text-official">PayPal</span>
                            </div>

                            <!-- Credit/Debit Card Button -->
                            <div class="paypal-card-button-official" id="paypalCardButtonOfficial">
                                <div class="card-icon-official">
                                    <i class="fas fa-credit-card"></i>
                                </div>
                            </div>

                            <!-- PayPal Branding -->
                            <div class="paypal-branding-official">
                                <span class="developed-text">Desarrollado por</span>
                                <strong class="paypal-brand">PayPal</strong>
                            </div>

                            <!-- Security Message -->
                            <div class="paypal-security-message">
                                <div class="security-content">
                                    <i class="fas fa-info-circle"></i>
                                    <span>Pago cancelado. Puedes intentar de nuevo.</span>
                                </div>
                            </div>
                        </div>

                        <!-- Order Notes -->
                        <div class="form-section">
                            <div class="section-header">
                                <h3 class="section-title">
                                    <i class="fas fa-sticky-note"></i>
                                    Order Notes (Optional)
                                </h3>
                            </div>
                            <div class="form-group">
                                <textarea id="orderNotes" name="orderNotes" rows="4" 
                                          placeholder="Special delivery instructions, additional comments..."></textarea>
                            </div>
                        </div>



                        <!-- Terms and Conditions -->
                        <div class="form-section mobile-essential">
                            <div class="form-group checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="acceptTerms" name="acceptTerms" required>
                                    <span class="checkmark"></span>
                                    <span class="label-text">
                                        <i class="fas fa-shield-alt"></i>
                                        I accept the <a href="#" target="_blank">terms and conditions</a> 
                                        and the <a href="#" target="_blank">privacy policy</a>
                                    </span>
                                </label>
                            </div>
                            <div class="form-group checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="newsletter" name="newsletter">
                                    <span class="checkmark"></span>
                                    <span class="label-text">
                                        <i class="fas fa-envelope"></i>
                                        I want to receive offers and news via email
                                    </span>
                                </label>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Order Summary -->
                <div class="order-summary">
                    <div class="summary-card">
                        <h3 class="summary-title">Order Summary</h3>
                        
                        <!-- Order Items -->
                        <div class="order-items" id="orderItems">
                            <!-- Items will be loaded dynamically -->
                        </div>

                        <!-- Summary Totals -->
                        <div class="summary-totals" id="summaryTotals">
                            <!-- Totals will be calculated dynamically -->
                        </div>

                        <!-- Security Badges -->
                        <div class="security-info">
                            <div class="security-badge">
                                <i class="fas fa-shield-alt"></i>
                                <span>100% Secure Payment</span>
                            </div>
                            <div class="security-badge">
                                <i class="fas fa-lock"></i>
                                <span>SSL Protected Data</span>
                            </div>
                        </div>

                        <!-- Payment Buttons -->
                        <div class="payment-buttons mobile-essential">
                            <!-- Credit Card Button -->
                            <button type="submit" form="checkoutForm" class="btn btn-primary btn-full place-order-btn" id="placeOrderBtn" style="display: none;">
                                <i class="fas fa-credit-card"></i>
                                <span>Complete Order</span>
                                <div class="loading-spinner" style="display: none;">
                                    <i class="fas fa-spinner fa-spin"></i>
                                </div>
                            </button>

                            <!-- PayPal Official Buttons (Mobile) -->
                            <div class="paypal-official-buttons mobile-paypal" id="paypal-button-container" style="display: none; margin-top: 15px;">
                                <!-- PayPal Official Button -->
                                <button type="button" class="paypal-button-official paypal-primary" onclick="window.handlePayPalPayment()">
                                    <span class="paypal-logo">PayPal</span>
                                </button>
                                
                                <!-- Debit/Credit Card via PayPal -->
                                <button type="button" class="paypal-button-official paypal-secondary" onclick="window.handlePayPalCardPayment()">
                                    <span class="paypal-card-icon">üí≥</span>
                                </button>
                                
                                <!-- PayPal Branding -->
                                <div class="paypal-branding">
                                    <span>Desarrollado por <strong>PayPal</strong></span>
                                </div>
                                
                                <!-- Cancellation Notice -->
                                <div class="paypal-notice" style="display: none;">
                                    <div class="notice-content">
                                        <i class="fas fa-info-circle"></i>
                                        <span>Pago cancelado. Puedes intentar de nuevo.</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Payment Method Instructions -->
                            <div class="payment-instructions" id="paymentInstructions">
                                <p><i class="fas fa-info-circle"></i> Please select a payment method above to continue</p>
                            </div>
                        </div>

                        <p class="order-guarantee">
                            <i class="fas fa-info-circle"></i>
                            Your order will be processed securely. You will receive a confirmation email.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <!-- Footer Brand -->
                <div class="footer-brand">
                    <div class="logo">
                        <img src="./assets/images/logo-white.svg" alt="Your Store" class="logo-img">
                        <span class="logo-text">YourStore</span>
                    </div>
                    <p class="footer-description">
                        Your trusted partner para Products y Services de alta calidad. 
                        Comprometidos con la excelencia From 2020.
                    </p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                
                <!-- Footer Links -->
                <div class="footer-links">
                    <div class="footer-column">
                        <h4>Services</h4>
                        <ul>
                            <li><a href="#consulting">Strategic Consulting</a></li>
                            <li><a href="#implementation">Technical Implementation</a></li>
                            <li><a href="#support">Support and Maintenance</a></li>
                            <li><a href="#">Success Stories</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Products</h4>
                        <ul>
                            <li><a href="products.html">All Products</a></li>
                            <li><a href="products.html?category=electronics">Electronics</a></li>
                            <li><a href="products.html?category=fashion">Fashion</a></li>
                            <li><a href="products.html?category=home">Home</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Resources</h4>
                        <ul>
                            <li><a href="#">Blog</a></li>
                            <li><a href="#">Documentation</a></li>
                            <li><a href="#">Frequently Asked Questions</a></li>
                            <li><a href="#">Help Center</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Contact</h4>
                        <ul>
                            <li><a href="index.html#Contact">Contact Form</a></li>
                            <li><a href="tel:+34123456789">+34 123 456 789</a></li>
                            <li><a href="mailto:info@yourstore.com">info@yourstore.com</a></li>
                            <li><a href="#">Live Chat</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Footer Bottom -->
            <div class="footer-bottom">
                <div class="footer-legal">
                    <p>&copy; 2025 TuTienda. All rights reserved.</p>
                    <div class="legal-links">
                        <a href="#">Privacy Policy</a>
                        <a href="#">Terms of Service</a></li>
                        <a href="#">Cookie Policy</a>
                        <a href="#">Legal Notice</a>
                    </div>
                </div>
                <div class="template-credits">
                    <p class="template-copyright">
                        <i class="fas fa-code"></i>
                        Template designed and developed by <strong>Josep Andreu</strong> &copy; 2025
                        <br>
                        <small>Commercial use license included - Do not redistribute without authorization</small>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop" aria-label="Volver arriba">
        <i class="fas fa-chevron-up"></i>
    </button>

    <!-- PayPal SDK - SANDBOX MODE for testing -->
    <!-- Using PayPal's sandbox client ID for demo purposes -->
    <!-- Get your own client ID from: https://developer.paypal.com/ -->
    <script 
        src="https://www.paypal.com/sdk/js?client-id=sb&currency=USD&disable-funding=credit,card"
        onload="console.log('‚úÖ PayPal SDK loaded successfully'); window.paypalReady = true;"
        onerror="console.error('‚ùå Failed to load PayPal SDK'); window.paypalFailed = true;">
    </script>
    
    <!-- PayPal SDK Loading Handler -->
    <script>
        // Wait for PayPal SDK or handle failure
        let paypalCheckAttempts = 0;
        const maxAttempts = 10;
        
        function checkPayPalStatus() {
            paypalCheckAttempts++;
            
            if (window.paypalReady || typeof paypal !== 'undefined') {
                console.log('‚úÖ PayPal SDK confirmed loaded after', paypalCheckAttempts, 'attempts');
                return;
            }
            
            if (window.paypalFailed || paypalCheckAttempts >= maxAttempts) {
                console.warn('‚ö†Ô∏è PayPal SDK failed to load after', paypalCheckAttempts, 'attempts');
                
                // Show fallback message
                setTimeout(() => {
                    const container = document.getElementById('paypal-button-container');
                    if (container) {
                        container.innerHTML = `
                            <div style="padding: 15px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 5px; text-align: center; color: #856404; font-weight: 500;">
                                ‚ö†Ô∏è PayPal is temporarily unavailable<br>
                                <small>Please use the "Bank Transfer" option to complete your purchase</small>
                            </div>
                        `;
                    }
                }, 1000);
                return;
            }
            
            // Retry in 500ms
            setTimeout(checkPayPalStatus, 500);
        }
        
        // Start checking after page loads
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(checkPayPalStatus, 1000);
        });
    </script>

    <!-- JavaScript -->
    <script src="./assets/js/utilities-bundle.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script src="./assets/js/image-loader.js"></script>
    <script src="./assets/js/cart-sync.js"></script>
    <script src="./assets/js/main.js"></script>
    <script src="./assets/js/cart.js"></script>
    <script src="./assets/js/checkout.js"></script>
    <!-- PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=AZDxjDScFpQtjWTOUtWKbyN_bDt4OgqaF4eYXlewfBP4-8aqX3PiV8e1GWU6liB2CUXlkA59kJXE7M6R&currency=USD"></script>
    
    <!-- PayPal Official Buttons Script -->
    <script>
        // Initialize PayPal buttons when DOM and SDK are ready
        function initPayPalButtons() {
            console.log('üéØ Initializing PayPal official buttons...');
            
            // Check if PayPal SDK is loaded
            if (typeof paypal === 'undefined') {
                console.error('‚ùå PayPal SDK not loaded');
                document.getElementById('paypal-loading').style.display = 'none';
                document.getElementById('paypal-error').style.display = 'block';
                return;
            }
            
            // Hide loading message
            document.getElementById('paypal-loading').style.display = 'none';
            
            // Clear container
            const container = document.getElementById('paypal-button-container-main');
            if (!container) {
                console.error('‚ùå PayPal container not found');
                return;
            }
            
            container.innerHTML = '';
            
            // Create PayPal buttons
            paypal.Buttons({
                style: {
                    layout: 'vertical',
                    color: 'blue',
                    shape: 'rect',
                    label: 'paypal',
                    height: 50
                },
                
                createOrder: function(data, actions) {
                    console.log('üí≥ Creating PayPal order...');
                    
                    try {
                        // Get cart data from checkout system
                        let cartTotal = '100.00'; // Default fallback
                        let cartItems = [];
                        
                        // Try to get data from checkout manager if available
                        if (window.checkoutManager && typeof window.checkoutManager.calculateTotals === 'function') {
                            const totals = window.checkoutManager.calculateTotals();
                            cartTotal = totals.total;
                            cartItems = window.checkoutManager.cart || [];
                        }
                        
                        // Prepare order payload
                        const orderPayload = {
                            purchase_units: [{
                                amount: {
                                    currency_code: 'USD',
                                    value: cartTotal
                                },
                                description: 'Purchase from YourStore'
                            }]
                        };
                        
                        // Add items if available
                        if (cartItems.length > 0) {
                            orderPayload.purchase_units[0].items = cartItems.map(item => ({
                                name: item.name || 'Product',
                                unit_amount: {
                                    currency_code: 'USD',
                                    value: parseFloat(item.price || 0).toFixed(2)
                                },
                                quantity: (item.quantity || 1).toString()
                            }));
                        }
                        
                        console.log('üì¶ PayPal Order Payload:', orderPayload);
                        return actions.order.create(orderPayload);
                        
                    } catch (error) {
                        console.error('‚ùå Error creating PayPal order:', error);
                        throw error;
                    }
                },
                
                onApprove: function(data, actions) {
                    console.log('‚úÖ PayPal payment approved:', data);
                    
                    return actions.order.capture().then(function(details) {
                        console.log('üí∞ Payment captured:', details);
                        
                        // Show professional success message
                        const successMessage = `
                            üéâ Payment Successful!
                            
                            Transaction ID: ${details.id}
                            Amount: $${details.purchase_units[0].amount.value}
                            Status: ${details.status}
                            
                            Thank you for your purchase!`;
                        
                        alert(successMessage);
                        
                        // Clear cart if cart manager exists
                        if (window.cartManager && typeof window.cartManager.clearCart === 'function') {
                            window.cartManager.clearCart();
                        }
                        
                        // Here you would typically send the payment details to your server
                        console.log('Payment Details for server:', {
                            transactionId: details.id,
                            amount: details.purchase_units[0].amount.value,
                            currency: details.purchase_units[0].amount.currency_code,
                            status: details.status,
                            payer: details.payer
                        });
                        
                        // Redirect to success page after a brief delay
                        setTimeout(() => {
                            // window.location.href = '/success.html';
                            console.log('Redirect to success page would happen here');
                        }, 2000);
                    });
                },
                
                onError: function(err) {
                    console.error('‚ùå PayPal payment error:', err);
                    alert('An error occurred during payment. Please try again.');
                },
                
                onCancel: function(data) {
                    console.log('‚ùå PayPal payment cancelled:', data);
                    alert('Payment was cancelled.');
                }
                
            }).render('#paypal-button-container-main').then(function() {
                console.log('‚úÖ PayPal buttons rendered successfully');
            }).catch(function(error) {
                console.error('‚ùå Error rendering PayPal buttons:', error);
                document.getElementById('paypal-error').style.display = 'block';
            });
        }
        
        // Wait for both DOM and PayPal SDK to be ready
        function waitForPayPal() {
            if (typeof paypal !== 'undefined' && document.readyState === 'complete') {
                initPayPalButtons();
            } else {
                setTimeout(waitForPayPal, 100);
            }
        }
        
        // Start waiting when page loads
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', waitForPayPal);
        } else {
            waitForPayPal();
        }
    </script>
    <!-- Mobile Direct Payment Interface -->
    <script src="./assets/js/mobile-direct-payment.js"></script>
    <!-- Mobile Menu Handler -->
    <script src="./assets/js/checkout-mobile-menu.js"></script>
    
    <!-- Banner JavaScript -->
    <script>
    (function() {
        const demoBanner = document.getElementById('demo-banner');
        
        function hideBanner() {
            if (demoBanner) {
                demoBanner.style.webkitTransform = 'translateY(-100%)';
                demoBanner.style.transform = 'translateY(-100%)';
            }
        }
        
        function showBanner() {
            if (demoBanner) {
                demoBanner.style.webkitTransform = 'translateY(0)';
                demoBanner.style.transform = 'translateY(0)';
            }
        }
        
        let ticking = false;
        function handleScroll() {
            if (!ticking) {
                requestAnimationFrame(function() {
                    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    if (scrollTop > 20) { hideBanner(); } else if (scrollTop <= 5) { showBanner(); }
                    ticking = false;
                });
                ticking = true;
            }
        }
        
        window.addEventListener('scroll', handleScroll, { passive: true });
        document.querySelectorAll('a[href^="#"]').forEach(function(link) {
            link.addEventListener('click', function() { setTimeout(hideBanner, 100); });
        });
    })();
    </script>
    
    <!-- Payment Method Selection Script -->
    <script>
    (function() {
        // Payment method selection functionality
        function initPaymentMethodSelection() {
            const paymentOptions = document.querySelectorAll('.payment-option');
            const radioButtons = document.querySelectorAll('input[name="paymentMethod"]');
            
            // Add click handlers to payment option containers
            paymentOptions.forEach(function(option) {
                option.addEventListener('click', function(e) {
                    // Find the radio button within this option
                    const radioButton = option.querySelector('input[type="radio"]');
                    
                    if (radioButton && !radioButton.disabled) {
                        // Remove selected class from all options
                        paymentOptions.forEach(function(opt) {
                            opt.classList.remove('selected');
                        });
                        
                        // Add selected class to clicked option
                        option.classList.add('selected');
                        
                        // Check the radio button
                        radioButton.checked = true;
                        
                        // Trigger change event
                        radioButton.dispatchEvent(new Event('change', { bubbles: true }));
                    }
                });
            });
            
            // Handle radio button changes (for keyboard navigation)
            radioButtons.forEach(function(radio) {
                radio.addEventListener('change', function() {
                    // Remove selected class from all options
                    paymentOptions.forEach(function(opt) {
                        opt.classList.remove('selected');
                    });
                    
                    // Add selected class to the parent option of the checked radio
                    const parentOption = radio.closest('.payment-option');
                    if (parentOption) {
                        parentOption.classList.add('selected');
                    }
                });
            });
            
            // Set initial selected state
            const checkedRadio = document.querySelector('input[name="paymentMethod"]:checked');
            if (checkedRadio) {
                const parentOption = checkedRadio.closest('.payment-option');
                if (parentOption) {
                    parentOption.classList.add('selected');
                }
            }
        }
        
        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initPaymentMethodSelection);
        } else {
            initPaymentMethodSelection();
        }
    })();
    
    // MOBILE INPUT SIZE FIXER - Force correct sizing on mobile devices
    (function() {
        function forceMobileInputSizing() {
            if (window.innerWidth <= 768) {
                const mobileInputs = document.querySelectorAll('.mobile-essential input[type="text"], .mobile-essential input[type="email"], .mobile-essential input[type="tel"], .mobile-essential select');
                const mobileContainers = document.querySelectorAll('.mobile-essential');
                
                // Force container widths
                mobileContainers.forEach(function(container) {
                    container.style.width = 'calc(100vw - 1rem)';
                    container.style.maxWidth = 'calc(100vw - 1rem)';
                    container.style.margin = '0.5rem auto';
                    container.style.padding = '1rem';
                    container.style.boxSizing = 'border-box';
                });
                
                // Force input widths and styling
                mobileInputs.forEach(function(input) {
                    input.style.width = '100%';
                    input.style.maxWidth = '100%';
                    input.style.height = '56px';
                    input.style.fontSize = '16px';
                    input.style.padding = '1rem';
                    input.style.border = '2px solid #ddd';
                    input.style.borderRadius = '8px';
                    input.style.boxSizing = 'border-box';
                    input.style.margin = '0 0 1rem 0';
                    input.style.display = 'block';
                    input.style.webkitAppearance = 'none';
                    input.style.appearance = 'none';
                });
                
                // Force form-grid to block display
                const formGrids = document.querySelectorAll('.mobile-essential .form-grid');
                formGrids.forEach(function(grid) {
                    grid.style.display = 'block';
                    grid.style.width = '100%';
                    grid.style.gridTemplateColumns = 'none';
                });
                
                // Force form-group to block
                const formGroups = document.querySelectorAll('.mobile-essential .form-group');
                formGroups.forEach(function(group) {
                    group.style.display = 'block';
                    group.style.width = '100%';
                    group.style.marginBottom = '1.5rem';
                });
            }
        }
        
        // Run on load
        forceMobileInputSizing();
        
        // Run on resize
        window.addEventListener('resize', forceMobileInputSizing);
        
        // Run after a small delay to override any other scripts
        setTimeout(forceMobileInputSizing, 500);
    })();
    
    // PAYPAL OFFICIAL BUTTONS FUNCTIONALITY
    window.handlePayPalPayment = function() {
        console.log('PayPal payment initiated');
        
        // Hide notice if visible
        const notice = document.querySelector('.paypal-notice');
        if (notice) notice.style.display = 'none';
        
        // Simulate PayPal payment flow
        const button = event.target.closest('.paypal-primary');
        if (button) {
            // Add loading state
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Connecting to PayPal...';
            button.disabled = true;
            
            // Simulate redirect to PayPal (in real scenario, this would redirect to PayPal)
            setTimeout(() => {
                // Simulate PayPal cancellation/return
                button.innerHTML = originalText;
                button.disabled = false;
                
                // Show cancellation notice
                if (notice) {
                    notice.style.display = 'block';
                }
                
                console.log('PayPal payment flow completed (demo)');
            }, 2000);
        }
    };
    
    window.handlePayPalCardPayment = function() {
        console.log('PayPal card payment initiated');
        
        // Hide notice if visible
        const notice = document.querySelector('.paypal-notice');
        if (notice) notice.style.display = 'none';
        
        // Simulate PayPal card payment flow
        const button = event.target.closest('.paypal-secondary');
        if (button) {
            // Add loading state
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
            button.disabled = true;
            
            // Simulate card payment processing
            setTimeout(() => {
                // Simulate payment completion
                button.innerHTML = originalText;
                button.disabled = false;
                
                // Show cancellation notice (in demo)
                if (notice) {
                    notice.style.display = 'block';
                }
                
                console.log('PayPal card payment flow completed (demo)');
            }, 2500);
        }
    };
    
    // Initialize PayPal buttons on page load
    document.addEventListener('DOMContentLoaded', function() {
        console.log('PayPal Official Buttons initialized');
        
        // Add click handlers to buttons (fallback)
        const paypalButtons = document.querySelectorAll('.paypal-button-official');
        paypalButtons.forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                
                if (this.classList.contains('paypal-primary')) {
                    window.handlePayPalPayment();
                } else if (this.classList.contains('paypal-secondary')) {
                    window.handlePayPalCardPayment();
                }
            });
        });
    });
    </script>
</body>
</html>
